<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å‰æ—å¤§å­¦ç½‘ç«™å¯¼èˆª | JLU Website Navigation</title>
<style>
:root {
--primary: #2c5aa0;
--primary-light: #4a7ab8;
--bg: #f8f9fa;
--card-bg: #ffffff;
--text-primary: #2c3e50;
--text-secondary: #5a6c7d;
--border-color: #e1e8ed;
--input-bg: #ffffff;
--item-bg: #f1f3f4;
--item-hover: #e8eaed;
--confirmed-bg: #e8f0fe;
--shadow: rgba(0, 0, 0, 0.08);
--danger: #dc3545;
--success: #28a745;
--warning: #ffc107;
}

[data-theme="dark"] {
--primary: #5b9bd5;
--primary-light: #7ab8e8;
--bg: #1a1d21;
--card-bg: #242830;
--text-primary: #e8eaed;
--text-secondary: #9aa0a6;
--border-color: #3c4043;
--input-bg: #2d3139;
--item-bg: #2d3139;
--item-hover: #3c4043;
--confirmed-bg: #1e3a5f;
--shadow: rgba(0, 0, 0, 0.3);
--danger: #ef5350;
--success: #66bb6a;
--warning: #ffa726;
}

[data-theme="jlu"] {
--primary: #1e4d8c;
--primary-light: #2c5aa0;
--bg: #e8f4f8;
--card-bg: #ffffff;
--text-primary: #1a2951;
--text-secondary: #4a5568;
--border-color: #c5d9ed;
--input-bg: #fafcfe;
--item-bg: #f0f7ff;
--item-hover: #e1effe;
--confirmed-bg: #d4e6f7;
--shadow: rgba(30, 77, 140, 0.15);
--danger: #c53030;
--success: #276749;
--warning: #dd6b20;
}

* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
background: var(--bg);
min-height: 100vh;
padding: 20px;
color: var(--text-primary);
line-height: 1.6;
}

.container {
width: 100%;
max-width: 1200px;
margin: 0 auto;
position: relative;
}

/* Header - æå‡å±‚çº§ç¡®ä¿åœ¨ä¸‹æ‹‰èœå•å’ŒæŒ‰é’®ä¸‹æ–¹å†…å®¹ä¹‹ä¸Š */
.header {
background: var(--card-bg);
border-radius: 12px;
padding: 50px 40px 40px 40px;
margin-bottom: 30px;
box-shadow: 0 2px 12px var(--shadow);
position: relative;
z-index: 100;
animation: slideIn 0.5s ease;
border: 1px solid var(--border-color);
}

@keyframes slideIn {
from { opacity: 0; transform: translateY(-20px); }
to { opacity: 1; transform: translateY(0); }
}

/* æ§åˆ¶é¢æ¿ - å‚è€ƒGPAè®¡ç®—å™¨é£æ ¼ */
.control-panel {
position: absolute;
top: 15px;
left: 15px;
display: flex;
flex-direction: row;
gap: 8px;
align-items: center;
z-index: 200;
}

.control-btn {
border: 1px solid var(--border-color);
background: var(--card-bg);
border-radius: 6px;
width: 32px;
height: 32px;
cursor: pointer;
font-size: 14px;
transition: all 0.2s;
display: flex;
align-items: center;
justify-content: center;
color: var(--text-secondary);
position: relative;
font-weight: 500;
}

.control-btn:hover {
background: var(--item-hover);
border-color: var(--primary);
color: var(--primary);
}

/* ä¸‹æ‹‰èœå• - å‚è€ƒGPAè®¡ç®—å™¨é£æ ¼ */
.dropdown-menu {
display: none;
position: absolute;
top: 38px;
left: 0;
background: var(--card-bg);
border-radius: 8px;
padding: 6px;
box-shadow: 0 4px 12px var(--shadow);
min-width: 120px;
z-index: 300;
border: 1px solid var(--border-color);
}

.dropdown-menu.show {
display: block;
animation: dropdownFade 0.2s ease;
}

@keyframes dropdownFade {
from { opacity: 0; transform: translateY(-8px); }
to { opacity: 1; transform: translateY(0); }
}

.dropdown-item {
padding: 8px 12px;
border-radius: 4px;
cursor: pointer;
font-size: 13px;
transition: all 0.15s;
color: var(--text-primary);
display: flex;
align-items: center;
gap: 8px;
}

.dropdown-item:hover {
background: var(--item-hover);
}

.dropdown-item.active {
background: var(--primary);
color: white;
}

h1 {
text-align: center;
color: var(--text-primary);
margin-bottom: 8px;
font-size: 1.8em;
font-weight: 600;
}

.subtitle {
text-align: center;
color: var(--text-secondary);
margin-bottom: 25px;
font-size: 0.9em;
}

/* Search Box */
.search-container {
max-width: 600px;
margin: 0 auto;
position: relative;
}

.search-input {
width: 100%;
padding: 12px 20px 12px 45px;
border: 1px solid var(--border-color);
border-radius: 8px;
font-size: 15px;
background: var(--input-bg);
color: var(--text-primary);
transition: all 0.2s;
outline: none;
}

.search-input:focus {
border-color: var(--primary);
box-shadow: 0 0 0 3px rgba(44, 90, 160, 0.1);
}

[data-theme="dark"] .search-input:focus {
box-shadow: 0 0 0 3px rgba(91, 155, 213, 0.2);
}

.search-icon {
position: absolute;
left: 15px;
top: 50%;
transform: translateY(-50%);
font-size: 18px;
color: var(--text-secondary);
pointer-events: none;
}

.clear-btn {
position: absolute;
right: 12px;
top: 50%;
transform: translateY(-50%);
background: none;
border: none;
font-size: 16px;
cursor: pointer;
color: var(--text-secondary);
display: none;
padding: 4px 8px;
border-radius: 4px;
}

.clear-btn:hover {
background: var(--item-hover);
}

.clear-btn.show {
display: block;
}

/* Grid */
.sites-grid {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
gap: 16px;
margin-bottom: 30px;
position: relative;
z-index: 1;
}

/* ç§»åŠ¨ç«¯é€‚é… */
@media (max-width: 768px) {
body { padding: 10px; }

.container { padding: 0; }

.header {
padding: 50px 20px 25px 20px;
margin-bottom: 20px;
}

.sites-grid {
grid-template-columns: 1fr;
gap: 12px;
}

.control-panel { top: 12px; left: 12px; }

h1 { font-size: 1.5em; }

.subtitle { font-size: 0.85em; margin-bottom: 20px; }

.search-input { padding: 10px 40px 10px 40px; font-size: 14px; }
}

/* Site Card - å‚è€ƒGPAè®¡ç®—å™¨å¡ç‰‡é£æ ¼ */
.site-card {
background: var(--card-bg);
border-radius: 8px;
padding: 16px;
cursor: pointer;
transition: all 0.2s;
border: 1px solid var(--border-color);
box-shadow: 0 2px 8px var(--shadow);
display: flex;
align-items: center;
gap: 12px;
position: relative;
}

@media (max-width: 768px) {
.site-card { padding: 14px; }
.site-emoji { font-size: 2em; }
.site-name { font-size: 0.95em; }
.site-url { font-size: 0.75em; }
}

.site-card:hover {
transform: translateY(-2px);
box-shadow: 0 4px 12px var(--shadow);
border-color: var(--primary);
}

.site-card.hidden {
display: none;
}

.site-emoji {
font-size: 2.2em;
line-height: 1;
flex-shrink: 0;
}

.site-info {
flex: 1;
min-width: 0;
}

.site-name {
font-weight: 600;
font-size: 1em;
margin-bottom: 4px;
color: var(--text-primary);
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
}

.site-url {
font-size: 0.8em;
color: var(--text-secondary);
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
font-family: monospace;
}

/* Modal - å‚è€ƒGPAè®¡ç®—å™¨å¼¹çª—é£æ ¼ */
.modal-overlay {
display: none;
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.5);
z-index: 2000;
justify-content: center;
align-items: center;
backdrop-filter: blur(4px);
padding: 20px;
}

.modal-overlay.show {
display: flex;
}

.modal-content {
background: var(--card-bg);
border-radius: 12px;
padding: 32px;
max-width: 450px;
width: 100%;
box-shadow: 0 4px 20px var(--shadow);
border: 1px solid var(--border-color);
animation: scaleIn 0.3s ease;
}

@keyframes scaleIn {
from { opacity: 0; transform: scale(0.9); }
to { opacity: 1; transform: scale(1); }
}

.modal-header {
text-align: center;
margin-bottom: 20px;
}

.modal-emoji {
font-size: 3.5em;
margin-bottom: 12px;
display: block;
}

.modal-title {
font-size: 1.3em;
font-weight: 600;
color: var(--text-primary);
margin-bottom: 8px;
}

.modal-url {
font-size: 0.85em;
color: var(--text-secondary);
word-break: break-all;
background: var(--item-bg);
padding: 10px 12px;
border-radius: 6px;
margin: 16px 0;
font-family: monospace;
border: 1px solid var(--border-color);
}

.modal-actions {
display: flex;
gap: 12px;
margin-top: 24px;
}

.modal-btn {
flex: 1;
padding: 10px 20px;
border: none;
border-radius: 6px;
font-weight: 500;
font-size: 14px;
cursor: pointer;
transition: all 0.2s;
}

.modal-btn-primary {
background: var(--primary);
color: white;
}

.modal-btn-primary:hover {
background: var(--primary-light);
}

.modal-btn-secondary {
background: var(--item-bg);
color: var(--text-primary);
border: 1px solid var(--border-color);
}

.modal-btn-secondary:hover {
background: var(--item-hover);
}

/* ç§»åŠ¨ç«¯å¼¹çª—é€‚é… */
@media (max-width: 480px) {
.modal-content {
padding: 24px 20px;
margin: 10px;
}

.modal-title { font-size: 1.2em; }

.modal-actions { flex-direction: column; gap: 10px; }

.modal-btn { width: 100%; }

.modal-emoji { font-size: 3em; }
}

/* No Results */
.no-results {
text-align: center;
padding: 60px 20px;
color: var(--text-secondary);
font-size: 1.1em;
display: none;
}

.no-results.show { display: block; }

.no-results-icon {
font-size: 3.5em;
margin-bottom: 16px;
opacity: 0.5;
}

@media (max-width: 768px) {
.no-results { padding: 40px 20px; }
.no-results-icon { font-size: 3em; }
}

/* Footer */
.footer {
text-align: center;
padding: 30px;
color: var(--text-secondary);
font-size: 0.9em;
opacity: 0.8;
}

@media (max-width: 768px) {
.footer { padding: 20px; font-size: 0.85em; }
}

/* å›é¡¶æŒ‰é’® */
.back-to-top {
position: fixed;
bottom: 30px;
right: 30px;
width: 44px;
height: 44px;
border-radius: 50%;
background: var(--card-bg);
border: 1px solid var(--border-color);
box-shadow: 0 2px 8px var(--shadow);
cursor: pointer;
font-size: 18px;
display: flex;
align-items: center;
justify-content: center;
opacity: 0;
visibility: hidden;
transition: all 0.2s;
z-index: 99;
color: var(--text-primary);
}

.back-to-top:hover {
background: var(--primary);
color: white;
border-color: var(--primary);
transform: translateY(-2px);
}

.back-to-top.show {
opacity: 1;
visibility: visible;
}

@media (max-width: 768px) {
.back-to-top {
bottom: 20px;
right: 20px;
width: 40px;
height: 40px;
font-size: 16px;
}
}
</style>
</head>
<body>
<div class="container">
<!-- Header -->
<div class="header">
<div class="control-panel">
<button class="control-btn" onclick="window.location.href='/JLU-Toolkit/index.html'" title="è¿”å›é¦–é¡µ">â†</button>
<button class="control-btn" id="themeBtn" onclick="toggleDropdown('themeDropdown')" title="åˆ‡æ¢ä¸»é¢˜">â˜€</button>
<div class="dropdown-menu" id="themeDropdown"></div>
<button class="control-btn" id="langBtn" onclick="toggleDropdown('langDropdown')" title="åˆ‡æ¢è¯­è¨€">ç®€</button>
<div class="dropdown-menu" id="langDropdown"></div>
</div>
<h1 id="pageTitle">ğŸ¦¢ å‰æ—å¤§å­¦ç½‘ç«™å¯¼èˆª</h1>
<p class="subtitle" id="pageSubtitle">å¸¸ç”¨æ ¡å›­ç½‘ç»œæœåŠ¡ä¸€ç«™å¼å…¥å£</p>
<!-- Search -->
<div class="search-container">
<span class="search-icon">ğŸ”</span>
<input type="text" class="search-input" id="searchInput" placeholder="æœç´¢ç½‘ç«™åç§°..." oninput="handleSearch()">
<button class="clear-btn" id="clearBtn" onclick="clearSearch()">âœ•</button>
</div>
</div>
<!-- Content -->
<div class="sites-grid" id="sitesGrid"></div>
<!-- No Results -->
<div class="no-results" id="noResults">
<div class="no-results-icon">ğŸ”</div>
<div id="noResultsText">æœªæ‰¾åˆ°åŒ¹é…çš„ç½‘ç«™</div>
</div>
<!-- Footer -->
<div class="footer">
<div>JLU Website Navigation</div>
</div>
<!-- å›é¡¶æŒ‰é’® -->
<button class="back-to-top" id="backToTop" onclick="scrollToTop()" title="å›åˆ°é¡¶éƒ¨">â¬†ï¸</button>
</div>
<!-- Confirm Modal -->
<div class="modal-overlay" id="confirmModal" onclick="closeModal(event)">
<div class="modal-content" onclick="event.stopPropagation()">
<div class="modal-header">
<span class="modal-emoji" id="modalEmoji">ğŸŒ</span>
<div class="modal-title" id="modalSiteName">ç½‘ç«™åç§°</div>
</div>
<div class="modal-url" id="modalUrl">https://example.com</div>
<div style="text-align: center; color: var(--text-secondary); font-size: 0.9em; margin: 16px 0;" id="modalConfirmText">
ç¡®å®šè¦è·³è½¬åˆ°è¯¥ç½‘ç«™å—ï¼Ÿ
</div>
<div class="modal-actions">
<button class="modal-btn modal-btn-secondary" onclick="closeModal()" id="modalCancel">å–æ¶ˆ</button>
<button class="modal-btn modal-btn-primary" onclick="confirmJump()" id="modalConfirm">ç¡®è®¤è·³è½¬</button>
</div>
</div>
</div>
<script>
// State
let currentLang = 'zh-CN';
let currentTheme = 'default';
let currentUrl = '';

// ä¸‰ç§ä¸»é¢˜é…ç½®ï¼Œå¸¦å›¾æ ‡ï¼ˆä¸GPAè®¡ç®—å™¨ä¸€è‡´ï¼‰
const themes = [
{ id: 'default', name: 'æå…‰ç™½', icon: 'â˜€' },
{ id: 'dark', name: 'æš—å¤œé»‘', icon: 'â˜¾' },
{ id: 'jlu', name: 'å‰å¤§è“', icon: 'â—†' }
];

// ä¸‰ç§è¯­è¨€é…ç½®ï¼Œå¸¦å›¾æ ‡ï¼ˆä¸GPAè®¡ç®—å™¨ä¸€è‡´ï¼‰
const languages = [
{ code: 'zh-CN', name: 'ç®€ä½“ä¸­æ–‡', icon: 'ç®€' },
{ code: 'zh-TW', name: 'ç¹é«”ä¸­æ–‡', icon: 'ç¹' },
{ code: 'en', name: 'English', icon: 'EN' }
];

// Translationsï¼ˆä¿ç•™åŸæœ‰ç¿»è¯‘å†…å®¹ï¼‰
const translations = {
'zh-CN': {
title: 'ğŸ¦¢ å‰æ—å¤§å­¦ç½‘ç«™å¯¼èˆª',
subtitle: 'å¸¸ç”¨æ ¡å›­ç½‘ç»œæœåŠ¡ä¸€ç«™å¼å…¥å£',
searchPlaceholder: 'æœç´¢ç½‘ç«™åç§°...',
noResults: 'æœªæ‰¾åˆ°åŒ¹é…çš„ç½‘ç«™',
confirmText: 'ç¡®å®šè¦è·³è½¬åˆ°è¯¥ç½‘ç«™å—ï¼Ÿ',
cancel: 'å–æ¶ˆ',
confirm: 'ç¡®è®¤è·³è½¬',
controls: {
theme: 'ä¸»é¢˜',
language: 'è¯­è¨€',
home: 'è¿”å›é¦–é¡µ'
},
themes: ['æå…‰ç™½', 'æš—å¤œé»‘', 'å‰å¤§è“'],
langs: ['ç®€ä½“ä¸­æ–‡', 'ç¹é«”ä¸­æ–‡', 'English']
},
'zh-TW': {
title: 'ğŸ¦¢ å‰æ—å¤§å­¸ç¶²ç«™å°èˆª',
subtitle: 'å¸¸ç”¨æ ¡åœ’ç¶²çµ¡æœå‹™ä¸€ç«™å¼å…¥å£',
searchPlaceholder: 'æœç´¢ç¶²ç«™åç¨±...',
noResults: 'æœªæ‰¾åˆ°åŒ¹é…çš„ç¶²ç«™',
confirmText: 'ç¢ºå®šè¦è·³è½‰åˆ°è©²ç¶²ç«™å—ï¼Ÿ',
cancel: 'å–æ¶ˆ',
confirm: 'ç¢ºèªè·³è½‰',
controls: {
theme: 'ä¸»é¡Œ',
language: 'èªè¨€',
home: 'è¿”å›é¦–é '
},
themes: ['æ¥µå…‰ç™½', 'æš—å¤œé»‘', 'å‰å¤§è—'],
langs: ['ç®€ä½“ä¸­æ–‡', 'ç¹é«”ä¸­æ–‡', 'English']
},
'en': {
title: 'ğŸ¦¢ JLU Website Navigation',
subtitle: 'Campus Network Services Portal',
searchPlaceholder: 'Search website name...',
noResults: 'No matching websites found',
confirmText: 'Are you sure you want to visit this website?',
cancel: 'Cancel',
confirm: 'Confirm',
controls: {
theme: 'Theme',
language: 'Language',
home: 'Home'
},
themes: ['Aurora White', 'Dark Night', 'JLU Blue'],
langs: ['ç®€ä½“ä¸­æ–‡', 'ç¹é«”ä¸­æ–‡', 'English']
}
};

// Website Dataï¼ˆä¿ç•™åŸæœ‰æ•°æ®ï¼‰
const websites = [
{ emoji: 'ğŸ›ï¸', url: 'https://www.jlu.edu.cn/', name: { 'zh-CN': 'å‰å¤§å®˜ç½‘', 'zh-TW': 'å‰å¤§å®˜ç¶²', 'en': 'JLU Official Website' }},
{ emoji: 'ğŸ“š', url: 'https://iedu.jlu.edu.cn/', name: { 'zh-CN': 'æ•™åŠ¡ç®¡ç†ç³»ç»Ÿ', 'zh-TW': 'æ•™å‹™ç®¡ç†ç³»çµ±', 'en': 'Academic Management System' }},
{ emoji: 'ğŸ“', url: 'http://yjs.jlu.edu.cn/', name: { 'zh-CN': 'ç ”ç©¶ç”Ÿç®¡ç†ç³»ç»Ÿ', 'zh-TW': 'ç ”ç©¶ç”Ÿç®¡ç†ç³»çµ±', 'en': 'Graduate Management System' }},
{ emoji: 'ğŸ“‹', url: 'https://icourses.jlu.edu.cn', name: { 'zh-CN': 'å­¦ç”Ÿé€‰è¯¾', 'zh-TW': 'å­¸ç”Ÿé¸èª²', 'en': 'Course Selection' }},
{ emoji: 'ğŸ”’', url: 'https://vpn.jlu.edu.cn/', name: { 'zh-CN': 'å‰æ—å¤§å­¦VPN', 'zh-TW': 'å‰æ—å¤§å­¸VPN', 'en': 'JLU VPN' }},
{ emoji: 'ğŸ’°', url: 'https://cwsf.jlu.edu.cn/payment/', name: { 'zh-CN': 'è´¢åŠ¡ç¼´è´¹å¹³å°', 'zh-TW': 'è²¡å‹™ç¹³è²»å¹³å°', 'en': 'Payment Platform' }},
{ emoji: 'ğŸ¢', url: 'https://www.jlu.edu.cn/jgsz/yxsz.htm', name: { 'zh-CN': 'é™¢ç³»è®¾ç½®ï¼ˆå„å­¦é™¢å®˜ç½‘ï¼‰', 'zh-TW': 'é™¢ç³»è¨­ç½®ï¼ˆå„å­¸é™¢å®˜ç¶²ï¼‰', 'en': 'Departments & Colleges' }},
{ emoji: 'ğŸ“–', url: 'https://ilearntec.jlu.edu.cn/', name: { 'zh-CN': 'å­¦åœ¨å‰å¤§', 'zh-TW': 'å­¸åœ¨å‰å¤§', 'en': 'Study at JLU' }},
{ emoji: 'ğŸŒŸ', url: 'http://jlu.benke.chaoxing.com/', name: { 'zh-CN': 'è¶…æ˜Ÿåœ¨çº¿å­¦å ‚', 'zh-TW': 'è¶…æ˜Ÿåœ¨ç·šå­¸å ‚', 'en': 'Chaoxing Online School' }},
{ emoji: 'ğŸ“¢', url: 'https://oa.jlu.edu.cn/', name: { 'zh-CN': 'æ ¡å†…é€šçŸ¥', 'zh-TW': 'æ ¡å…§é€šçŸ¥', 'en': 'Internal Notices' }},
{ emoji: 'ğŸ‘¨â€ğŸ«', url: 'https://zhxg.jlu.edu.cn/xg/index', name: { 'zh-CN': 'æ™ºæ…§å­¦å·¥', 'zh-TW': 'æ™ºæ…§å­¸å·¥', 'en': 'Smart Student Affairs' }},
{ emoji: 'ğŸ›ï¸', url: 'https://ehall.jlu.edu.cn/', name: { 'zh-CN': 'ç½‘ä¸ŠåŠäº‹å¤§å…', 'zh-TW': 'ç¶²ä¸Šè¾¦äº‹å¤§å»³', 'en': 'Online Service Hall' }},
{ emoji: 'ğŸŒ', url: 'https://nic.jlu.edu.cn/', name: { 'zh-CN': 'å¤§æ•°æ®ä¸ç½‘ç»œä¸­å¿ƒ', 'zh-TW': 'å¤§æ•¸æ“šèˆ‡ç¶²çµ¡ä¸­å¿ƒ', 'en': 'Big Data & Network Center' }},
{ emoji: 'ğŸ’»', url: 'https://ip.jlu.edu.cn/pay/', name: { 'zh-CN': 'æ ¡å›­ç½‘è‡ªåŠ©è¥ä¸šå…', 'zh-TW': 'æ ¡åœ’ç¶²è‡ªåŠ©ç‡Ÿæ¥­å»³', 'en': 'Network Self-Service' }},
{ emoji: 'ğŸ“…', url: 'http://jwc.jlu.edu.cn/jxrl.htm', name: { 'zh-CN': 'æ•™å­¦æ—¥å†', 'zh-TW': 'æ•™å­¸æ—¥æ›†', 'en': 'Academic Calendar' }},
{ emoji: 'ğŸ“§', url: 'https://mails.jlu.edu.cn/', name: { 'zh-CN': 'å­¦ç”Ÿé‚®ç®±', 'zh-TW': 'å­¸ç”Ÿéƒµç®±', 'en': 'Student Email' }},
{ emoji: 'ğŸ’¿', url: 'http://zbhrj.jlu.edu.cn/', name: { 'zh-CN': 'æ­£ç‰ˆè½¯ä»¶', 'zh-TW': 'æ­£ç‰ˆè»Ÿä»¶', 'en': 'Licensed Software' }},
{ emoji: 'ğŸ“š', url: 'http://lib.jlu.edu.cn/', name: { 'zh-CN': 'å›¾ä¹¦é¦†', 'zh-TW': 'åœ–æ›¸é¤¨', 'en': 'Library' }},
{ emoji: 'ğŸ“„', url: 'https://co2.cnki.net/Login.html?dp=jlu', name: { 'zh-CN': 'æœ¬ç§‘æ¯•ä¸šè®ºæ–‡ç®¡ç†', 'zh-TW': 'æœ¬ç§‘ç•¢æ¥­è«–æ–‡ç®¡ç†', 'en': 'Thesis Management' }},
{ emoji: 'ğŸ“œ', url: 'http://xwlw.jlu.edu.cn/', name: { 'zh-CN': 'å­¦ä½è®ºæ–‡ç³»ç»Ÿ', 'zh-TW': 'å­¸ä½è«–æ–‡ç³»çµ±', 'en': 'Degree Thesis System' }},
{ emoji: 'ğŸ“', url: 'http://kszx.jlu.edu.cn/', name: { 'zh-CN': 'è€ƒè¯•ä¸­å¿ƒ', 'zh-TW': 'è€ƒè©¦ä¸­å¿ƒ', 'en': 'Exam Center' }},
{ emoji: 'ğŸ‘¨â€ğŸ’¼', url: 'http://xsc.jlu.edu.cn/', name: { 'zh-CN': 'å­¦ç”Ÿå·¥ä½œéƒ¨', 'zh-TW': 'å­¸ç”Ÿå·¥ä½œéƒ¨', 'en': 'Student Affairs Dept' }},
{ emoji: 'ğŸ“‹', url: 'http://sais.jlu.edu.cn/', name: { 'zh-CN': 'å­¦ç”Ÿäº‹åŠ¡ç®¡ç†ç³»ç»Ÿ', 'zh-TW': 'å­¸ç”Ÿäº‹å‹™ç®¡ç†ç³»çµ±', 'en': 'Student Affairs System' }}
];

function init() {
renderDropdowns();
renderSites();
updateLanguage();
initBackToTop();
}

function renderDropdowns() {
const t = translations[currentLang];
const themeDropdown = document.getElementById('themeDropdown');
themeDropdown.innerHTML = themes.map((theme, index) => `
<div class="dropdown-item ${currentTheme === theme.id ? 'active' : ''}"
onclick="setTheme('${theme.id}')">
${theme.icon} ${t.themes[index]}
</div>
`).join('');

const langDropdown = document.getElementById('langDropdown');
langDropdown.innerHTML = languages.map((lang) => `
<div class="dropdown-item ${currentLang === lang.code ? 'active' : ''}"
onclick="setLanguage('${lang.code}')">
${lang.icon} ${lang.name}
</div>
`).join('');
}

function renderSites() {
const grid = document.getElementById('sitesGrid');
grid.innerHTML = websites.map((site, index) => `
<div class="site-card" data-name="${site.name['zh-CN']} ${site.name['zh-TW']} ${site.name['en']}"
onclick="openConfirmModal(${index})" style="animation: slideIn 0.5s ease ${index * 0.05}s backwards;">
<div class="site-emoji">${site.emoji}</div>
<div class="site-info">
<div class="site-name" data-key="name-${index}">${site.name[currentLang]}</div>
<div class="site-url">${site.url}</div>
</div>
</div>
`).join('');
}

function toggleDropdown(id) {
const dropdown = document.getElementById(id);
const allDropdowns = document.querySelectorAll('.dropdown-menu');
allDropdowns.forEach(d => {
if (d.id !== id) d.classList.remove('show');
});
dropdown.classList.toggle('show');
}

function setTheme(themeId) {
currentTheme = themeId;
if (themeId === 'default') {
document.body.removeAttribute('data-theme');
} else {
document.body.setAttribute('data-theme', themeId);
}
// æ›´æ–°ä¸»é¢˜æŒ‰é’®å›¾æ ‡
const themeObj = themes.find(t => t.id === themeId);
if (themeObj) {
document.getElementById('themeBtn').textContent = themeObj.icon;
}
renderDropdowns();
document.getElementById('themeDropdown').classList.remove('show');
}

function setLanguage(langCode) {
currentLang = langCode;
// æ›´æ–°è¯­è¨€æŒ‰é’®å›¾æ ‡
const langObj = languages.find(l => l.code === langCode);
if (langObj) {
document.getElementById('langBtn').textContent = langObj.icon;
}
renderDropdowns();
document.getElementById('langDropdown').classList.remove('show');
updateLanguage();
// æ›´æ–°ç½‘ç«™åç§°
websites.forEach((site, index) => {
const nameEl = document.querySelector(`[data-key="name-${index}"]`);
if (nameEl) nameEl.textContent = site.name[currentLang];
});
}

function updateLanguage() {
const t = translations[currentLang];
document.getElementById('pageTitle').textContent = t.title;
document.getElementById('pageSubtitle').textContent = t.subtitle;
document.getElementById('searchInput').placeholder = t.searchPlaceholder;
document.getElementById('noResultsText').textContent = t.noResults;
document.getElementById('modalConfirmText').textContent = t.confirmText;
document.getElementById('modalCancel').textContent = t.cancel;
document.getElementById('modalConfirm').textContent = t.confirm;
document.getElementById('themeBtn').title = t.controls.theme;
document.getElementById('langBtn').title = t.controls.language;
}

function handleSearch() {
const input = document.getElementById('searchInput');
const query = input.value.toLowerCase().trim();
const cards = document.querySelectorAll('.site-card');
const clearBtn = document.getElementById('clearBtn');
const noResults = document.getElementById('noResults');
clearBtn.classList.toggle('show', query.length > 0);
let visibleCount = 0;
cards.forEach(card => {
const nameData = card.getAttribute('data-name').toLowerCase();
if (nameData.includes(query)) {
card.classList.remove('hidden');
visibleCount++;
} else {
card.classList.add('hidden');
}
});
noResults.classList.toggle('show', visibleCount === 0 && query.length > 0);
}

function clearSearch() {
const input = document.getElementById('searchInput');
input.value = '';
input.focus();
handleSearch();
}

function openConfirmModal(index) {
const site = websites[index];
currentUrl = site.url;
document.getElementById('modalEmoji').textContent = site.emoji;
document.getElementById('modalSiteName').textContent = site.name[currentLang];
document.getElementById('modalUrl').textContent = site.url;
document.getElementById('confirmModal').classList.add('show');
}

function closeModal(event) {
if (!event || event.target.id === 'confirmModal') {
document.getElementById('confirmModal').classList.remove('show');
currentUrl = '';
}
}

function confirmJump() {
if (currentUrl) {
window.open(currentUrl, '_blank');
closeModal();
}
}

// å›é¡¶æŒ‰é’®åŠŸèƒ½
function initBackToTop() {
const backToTopBtn = document.getElementById('backToTop');
window.addEventListener('scroll', function() {
if (window.pageYOffset > 300) {
backToTopBtn.classList.add('show');
} else {
backToTopBtn.classList.remove('show');
}
});
}

function scrollToTop() {
window.scrollTo({
top: 0,
behavior: 'smooth'
});
}

// Close dropdown when clicking outside
document.addEventListener('click', function(e) {
if (!e.target.matches('.control-btn')) {
document.querySelectorAll('.dropdown-menu').forEach(d => d.classList.remove('show'));
}
});

// Initialize
window.onload = init;
</script>
</body>
</html>

